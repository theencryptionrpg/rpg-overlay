<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            background: transparent;
            margin: 0;
            overflow: hidden;
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 95vh;
            gap: 20px;
            padding: 20px;
        }
        .player {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
        }
        .nome {
            color: cyan;
            font-size: 70px;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 25px cyan;
        }
        .numeros {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .numeros img {
            height: 105px; /* Tamanho exato que você queria */
        }
    </style>
</head>
<body>
    <div class="container" id="players-container">
        Carregando...
    </div>

    <script>
        // === TROQUE AQUI ===
        const spreadsheetId = '1KVc7ozrZoeAtViL8byF8wIUAoL7co4x-iqO-qRGLY2M'; // Seu ID correto
        const apiKey = '1KVc7ozrZoeAtViL8byF8wIUAoL7co4x-iqO-qRGLY2M'; // Cole a API Key que você criou no Google Cloud

        // Prefixos dos PNGs
        const prefixoVida = '';      // Vida normal
        const prefixoEnergia = 'e';  // Energia com "e"

        // Armazena o estado anterior pra evitar oscilação
        let estadoAnterior = [];

        function criarNumeros(atual, maximo, prefixo) {
            const div = document.createElement('div');
            div.className = 'numeros';

            atual.toString().split('').forEach(d => {
                const img = document.createElement('img');
                img.src = `./${d.toLowerCase()}${prefixo}.png`;
                div.appendChild(img);
            });

            const slash = document.createElement('img');
            slash.src = `./slash${prefixo}.png`;
            div.appendChild(slash);

            maximo.toString().split('').forEach(d => {
                const img = document.createElement('img');
                img.src = `./${d.toLowerCase()}${prefixo}.png`;
                div.appendChild(img);
            });

            return div;
        }

        function criarPlayer(row) {
            const playerDiv = document.createElement('div');
            playerDiv.className = 'player';

            const nomeDiv = document.createElement('div');
            nomeDiv.className = 'nome';
            nomeDiv.textContent = row[0] || 'Jogador';
            playerDiv.appendChild(nomeDiv);

            // Vida
            playerDiv.appendChild(criarNumeros(row[2] || 0, row[1] || 0, prefixoVida));

            // Energia
            playerDiv.appendChild(criarNumeros(row[4] || 0, row[3] || 0, prefixoEnergia));

            return playerDiv;
        }

        function atualizar() {
            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/A2:E?key=${apiKey}`)
                .then(res => res.json())
                .then(data => {
                    if (!data.values) return;

                    const novoEstado = data.values.map(row => ({
                        nome: row[0] || '',
                        vidaAtual: Number(row[2] || 0),
                        vidaMax: Number(row[1] || 0),
                        energiaAtual: Number(row[4] || 0),
                        energiaMax: Number(row[3] || 0)
                    }));

                    // Só atualiza o visual se algo mudou (evita oscilação)
                    if (JSON.stringify(novoEstado) !== JSON.stringify(estadoAnterior)) {
                        const container = document.getElementById('players-container');
                        container.innerHTML = '';

                        data.values.forEach(row => {
                            container.appendChild(criarPlayer(row));
                        });

                        estadoAnterior = novoEstado;
                    }
                })
                .catch(err => {
                    console.error(err);
                });
        }

        atualizar();
        setInterval(atualizar, 3000); // Atualiza a cada 3 segundos
    </script>
</body>
</html>
