<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            background: transparent;
            margin: 0;
            overflow: hidden;
        }
        .container {
            display: flex;
            flex-direction: row;        /* Jogadores lado a lado (colunas) */
            flex-wrap: wrap;            /* Quebra pra próxima linha quando acabar espaço */
            justify-content: center;    /* Centraliza as colunas */
            align-content: flex-start;  /* Alinha as linhas no topo */
            height: 95vh;
            gap: 120px;                 /* Espaço entre os blocos (ajuste se quiser mais/menos) */
            padding: 40px;
        }
        .player {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            width: 45%;                 /* Cada player ocupa ~45% pra caber 2 por linha (2 colunas) */
            max-width: 600px;
        }
        .nome {
            color: cyan;
            font-size: 70px;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 25px cyan;
        }
        .numeros {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .numeros img {
            height: 105px;
        }
    </style>
</head>
<body>
    <div class="container" id="players-container">
        Carregando...
    </div>
    <script>
        const spreadsheetId = '1KVc7ozrZoeAtViL8byF8wIUAoL7co4x-iqO-qRGLY2M';
        const apiKey = 'AIzaSyCGm86Oo_M1VyR60TILWg6j4jvCze7E0KU';

        const prefixoVida = '';
        const prefixoEnergia = 'e';

        let estadoAnterior = [];

        // Função pra juntar colunas pares (ex: C e D pra vida max)
        function juntarColunas(col1, col2) {
            const v1 = (col1 || '').toString().trim();
            const v2 = (col2 || '').toString().trim();
            return Number(v1 + v2) || 0;
        }

        function criarNumeros(atual, maximo, prefixo) {
            const div = document.createElement('div');
            div.className = 'numeros';

            const atualNum = atual || 0;
            atualNum.toString().split('').forEach(d => {
                const img = document.createElement('img');
                img.src = `./${d.toLowerCase()}${prefixo}.png`;
                div.appendChild(img);
            });

            const slash = document.createElement('img');
            slash.src = `./slash${prefixo}.png`;
            div.appendChild(slash);

            const maxNum = maximo || 0;
            maxNum.toString().split('').forEach(d => {
                const img = document.createElement('img');
                img.src = `./${d.toLowerCase()}${prefixo}.png`;
                div.appendChild(img);
            });

            return div;
        }

        function criarPlayer(row) {
            const playerDiv = document.createElement('div');
            playerDiv.className = 'player';

            // Nome: coluna A e B (junta se tiver dois)
            const nome = (row[0] || '') + (row[1] || '');
            const nomeDiv = document.createElement('div');
            nomeDiv.className = 'nome';
            nomeDiv.textContent = nome.trim() || 'Jogador';
            playerDiv.appendChild(nomeDiv);

            // Vida: max (C+D), atual (E+F)
            const vidaMax = juntarColunas(row[2], row[3]);
            const vidaAtual = juntarColunas(row[4], row[5]);
            playerDiv.appendChild(criarNumeros(vidaAtual, vidaMax, prefixoVida));

            // Energia: max (G+H), atual (I+J)
            const energiaMax = juntarColunas(row[6], row[7]);
            const energiaAtual = juntarColunas(row[8], row[9]);
            playerDiv.appendChild(criarNumeros(energiaAtual, energiaMax, prefixoEnergia));

            return playerDiv;
        }

        function atualizar() {
            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/A2:J?key=${apiKey}`)
                .then(res => res.json())
                .then(data => {
                    if (!data.values || data.values.length === 0) {
                        document.getElementById('players-container').innerHTML = 'Nenhum jogador encontrado';
                        return;
                    }

                    const novoEstado = data.values
                        .filter(row => row[0] && row[0].trim() !== '')
                        .map(row => ({
                            nome: (row[0] || '') + (row[1] || ''),
                            vidaAtual: juntarColunas(row[4], row[5]),
                            vidaMax: juntarColunas(row[2], row[3]),
                            energiaAtual: juntarColunas(row[8], row[9]),
                            energiaMax: juntarColunas(row[6], row[7])
                        }));

                    if (JSON.stringify(novoEstado) !== JSON.stringify(estadoAnterior)) {
                        const container = document.getElementById('players-container');
                        container.innerHTML = '';

                        data.values.forEach(row => {
                            if (row[0] && row[0].trim() !== '') {
                                container.appendChild(criarPlayer(row));
                            }
                        });

                        estadoAnterior = novoEstado;
                    }
                })
                .catch(err => {
                    document.getElementById('players-container').innerHTML = 'Erro ao carregar dados';
                });
        }

        atualizar();
        setInterval(atualizar, 3000);
    </script>
</body>
</html>


